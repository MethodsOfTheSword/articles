---
layout: default
---
<article class="post-container">

    <div class="back-to-archive">
        <a class="back-link" href="{{ '/' | relative_url }}">&larr; Back to Archive</a>
    </div>

{% assign show_transcript = false %}
    {% assign badge_lang = nil %}

    {% if page.slug contains "-transcript_" or page.slug contains "-transcription_" %}
        {% assign show_transcript = true %}
        {% if page.slug contains "-transcription_" %}
            {% assign badge_lang = page.slug | split: "-transcription_" | last | upcase %}
        {% else %}
            {% assign badge_lang = page.slug | split: "-transcript_" | last | upcase %}
        {% endif %}
    {% elsif page.is_transcription or page.is_transcript %}
        {% assign show_transcript = true %}
        {% if page.lang %}{% assign badge_lang = page.lang | upcase %}{% endif %}
    {% endif %}

    {% if show_transcript %}
        <div class="badge-wrap">
            <span class="badge badge-transcription">
                Transcription{% if badge_lang %} ({{ badge_lang }}){% endif %}
            </span>
        </div>
    {% endif %}


    {% assign show_translation = false %}
    {% assign trans_lang = nil %}

    {% if page.slug contains "-translation_" %}
        {% assign show_translation = true %}
        {% assign trans_lang = page.slug | split: "-translation_" | last | upcase %}
    {% elsif page.is_translation %}
        {% assign show_translation = true %}
        {% if page.lang %}{% assign trans_lang = page.lang | upcase %}{% endif %}
    {% endif %}

    {% if show_translation %}
        <div class="badge-wrap">
            <span class="badge badge-translation">
                Translation{% if trans_lang %} ({{ trans_lang }}){% endif %}
            </span>
        </div>
    {% endif %}


    <header>
        <h1>{{ page.title }}</h1>
        {% if page.subtitle %}
        <div style="font-style: italic; color: #555; border-bottom: 1px solid #e0e0e0; padding-bottom: 20px; margin-bottom: 40px;">
            {{ page.date | date: "%B %d, %Y" }} â€¢ {{ page.subtitle }}
        </div>
        {% endif %}

        

        {% assign base_asset_path = '/assets/sources/' | relative_url %}
        
        {% assign current_filename = page.path | split: '/' | last | replace: '.md', '' | downcase | strip %}
        {% assign base_name = current_filename %}
        
        {% if base_name contains "-translation_" %}
            {% assign base_name = base_name | split: "-translation_" | first %}
        {% elsif base_name contains "-transcript_" %}
            {% assign base_name = base_name | split: "-transcript_" | first %}
        {% endif %}

        {% assign target_1 = current_filename | append: ".tmx" %}
        {% assign target_2 = base_name | append: ".tmx" %}
        {% assign auto_file = nil %}

        {% for file in site.static_files %}
            {% assign fname = file.name | downcase | strip %}
            {% if fname == target_1 or fname == target_2 %}
                {% assign auto_file = file.name %}
                {% break %}
            {% endif %}
        {% endfor %}

        {% assign viewer_target = nil %}

        {% if page.tmx_link %}
            {% unless page.tmx_link contains '://' %}
                {% assign viewer_target = page.tmx_link %}
            {% endunless %}
        {% endif %}

        {% unless viewer_target %}
            {% if auto_file %}
                {% assign viewer_target = auto_file %}
            {% endif %}
        {% endunless %}


        {% assign download_target = nil %}

        {% if page.tmx_link %}
            {% assign download_target = page.tmx_link %}
            {% unless download_target contains '://' %}
                {% assign download_target = base_asset_path | append: download_target %}
            {% endunless %}
        {% elsif auto_file %}
            {% assign download_target = base_asset_path | append: auto_file %}
        {% endif %}


        {% if viewer_target or download_target or page.source_link or page.transcription_link %}
        <div class="source-bar">
            <strong class="source-label">Source Files:</strong>

            {% if viewer_target %}
                <a href="{{ '/tmx_viewer/' | relative_url }}?file={{ viewer_target }}" target="_blank" class="viewer-btn">
                    â†”ï¸	Side-by-side
                </a>
            {% endif %}

            {% if page.source_link %}
                {% assign src = page.source_link %}
                {% unless src contains '://' %}{% assign src = base_asset_path | append: src %}{% endunless %}
                <a href="{{ src }}" target="_blank" class="source-link">
                    ğŸ–¼ï¸ Original Scan
                </a>
            {% endif %}

            {% if download_target %}
                <a href="{{ download_target }}" download class="source-link">
                    ğŸ’¾ TMX Data
                </a>
            {% endif %}

            {% if page.transcription_link %}
                {% assign txt = page.transcription_link %}
                {% unless txt contains '://' %}{% assign txt = base_asset_path | append: txt %}{% endunless %}
                <a href="{{ txt }}" target="_blank" class="source-link">
                    ğŸ“ Raw Text
                </a>
            {% endif %}

        </div>
        {% endif %}
        </header>

    <div class="post-content">
        {{ content }}
    </div>

    <hr class="fencing-divider" style="margin: 3rem 0; border: 0; border-top: 1px solid #eee;">
    {% include version_links.html %}

    {% if page.author %}
    <div style="text-align: right; margin-top: 60px; font-weight: bold; text-transform: uppercase; letter-spacing: 1px;">
        {{ page.author }}
    </div>
    {% endif %}

</article>